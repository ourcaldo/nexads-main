nexpocket@cloud-2:~/nexads-main$ ./run.sh
=== NexAds Complete Setup Script ===
=== NexAds Web Panel Setup ===
Domain (e.g., google.com or localhost): nexads.nexpocket.com
Frontend port [4000]: 4000
Backend port [8000]: 8000
SSL will be enabled for nexads.nexpocket.com
✓ .env file created
Cleaning up previous nexads installation...
Running: pm2 stop nexads-backend
[PM2][ERROR] Process or Namespace nexads-backend not found
Warning: pm2 stop nexads-backend failed (continuing)
Running: pm2 stop nexads-frontend
[PM2][ERROR] Process or Namespace nexads-frontend not found
Warning: pm2 stop nexads-frontend failed (continuing)
Running: pm2 delete nexads-backend
[PM2][ERROR] Process or Namespace nexads-backend not found
Warning: pm2 delete nexads-backend failed (continuing)
Running: pm2 delete nexads-frontend
[PM2][ERROR] Process or Namespace nexads-frontend not found
Warning: pm2 delete nexads-frontend failed (continuing)
Running: sudo systemctl stop nexads-automation.service
Failed to stop nexads-automation.service: Unit nexads-automation.service not loaded.
Warning: sudo systemctl stop nexads-automation.service failed (continuing)
Running: sudo systemctl disable nexads-automation.service
Failed to disable unit: Unit file nexads-automation.service does not exist.
Warning: sudo systemctl disable nexads-automation.service failed (continuing)
Running: sudo rm -f /etc/nginx/sites-enabled/nexads
Running: sudo rm -f /etc/nginx/sites-available/nexads
Running: sudo certbot delete --cert-name nexads.nexpocket.com --non-interactive
Saving debug log to /var/log/letsencrypt/letsencrypt.log
No certificate found with name nexads.nexpocket.com (expected /etc/letsencrypt/renewal/nexads.nexpocket.com.conf).
Ask for help or search for solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v for more details.
Warning: sudo certbot delete --cert-name nexads.nexpocket.com --non-interactive failed (continuing)
Running: sudo certbot delete --cert-name app.camarjaya.co.id --non-interactive
Saving debug log to /var/log/letsencrypt/letsencrypt.log
No certificate found with name app.camarjaya.co.id (expected /etc/letsencrypt/renewal/app.camarjaya.co.id.conf).
Ask for help or search for solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v for more details.
Warning: sudo certbot delete --cert-name app.camarjaya.co.id --non-interactive failed (continuing)
Running: sudo certbot delete --cert-name nexads.nexpocket.com --non-interactive
Saving debug log to /var/log/letsencrypt/letsencrypt.log
No certificate found with name nexads.nexpocket.com (expected /etc/letsencrypt/renewal/nexads.nexpocket.com.conf).
Ask for help or search for solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v for more details.
Warning: sudo certbot delete --cert-name nexads.nexpocket.com --non-interactive failed (continuing)
Running: sudo find /etc/nginx -name '*.conf' -o -name '*nginx*' | sudo xargs grep -l 'ssl_certificate' | sudo xargs sed -i '/ssl_certificate/d'
grep: /etc/nginx: Is a directory
sed: no input files
Warning: sudo find /etc/nginx -name '*.conf' -o -name '*nginx*' | sudo xargs grep -l 'ssl_certificate' | sudo xargs sed -i '/ssl_certificate/d' failed (continuing)
Running: sudo find /etc/nginx -name '*.conf' -o -name '*nginx*' | sudo xargs grep -l 'ssl_stapling/d'
grep: /etc/nginx: Is a directory
Warning: sudo find /etc/nginx -name '*.conf' -o -name '*nginx*' | sudo xargs grep -l 'ssl_stapling/d' failed (continuing)
Running: sudo rm -rf /etc/letsencrypt/live/nexads.nexpocket.com
Running: sudo rm -rf /etc/letsencrypt/live/app.camarjaya.co.id
Running: sudo rm -rf /etc/nginx/ssl-certificates
Running: sudo systemctl reload nginx
Job for nginx.service failed.
See "systemctl status nginx.service" and "journalctl -xeu nginx.service" for details.
Warning: sudo systemctl reload nginx failed (continuing)
✓ Previous nexads installation cleaned up
Installing dependencies...
Running: sudo apt update
Hit:1 https://d17k9fuiwb52nc.cloudfront.net jammy InRelease
Hit:2 http://security.ubuntu.com/ubuntu jammy-security InRelease
Hit:3 http://nova.clouds.archive.ubuntu.com/ubuntu jammy InRelease
Hit:4 http://nova.clouds.archive.ubuntu.com/ubuntu jammy-updates InRelease
Hit:5 http://nova.clouds.archive.ubuntu.com/ubuntu jammy-backports InRelease
Hit:6 https://ppa.launchpadcontent.net/deadsnakes/ppa/ubuntu jammy InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
36 packages can be upgraded. Run 'apt list --upgradable' to see them.
Running: sudo apt install -y python3-pip nginx certbot python3-certbot-nginx nodejs npm
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
certbot is already the newest version (1.21.0-1build1).
npm is already the newest version (8.5.1~ds-1).
python3-certbot-nginx is already the newest version (1.21.0-1).
nodejs is already the newest version (12.22.9~dfsg-1ubuntu3.6).
python3-pip is already the newest version (22.0.2+dfsg-1ubuntu0.6).
nginx is already the newest version (1.21.4-15+clp-jammy).
0 upgraded, 0 newly installed, 0 to remove and 36 not upgraded.
1 not fully installed or removed.
After this operation, 0 B of additional disk space will be used.
Setting up cloudpanel (2.5.1-2+clp-jammy) ...
cp: cannot stat '/tmp/cloudpanel/data/clp/services/nginx/systemd/clp-nginx.service': No such file or directory
dpkg: error processing package cloudpanel (--configure):
 installed cloudpanel package post-installation script subprocess returned error exit status 1
Errors were encountered while processing:
 cloudpanel
needrestart is being skipped since dpkg has failed
E: Sub-process /usr/bin/dpkg returned an error code (1)
Error running: sudo apt install -y python3-pip nginx certbot python3-certbot-nginx nodejs npm
Running: pip3 install -r core/requirements.txt
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: PyQt5 in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 1)) (5.15.11)
Requirement already satisfied: browserforge[all] in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 2)) (1.2.3)
Requirement already satisfied: camoufox[geoip] in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 3)) (0.4.11)
Requirement already satisfied: undetected-chromedriver in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 4)) (3.5.5)
Requirement already satisfied: selenium in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 5)) (4.33.0)
Requirement already satisfied: requests==2.31.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 6)) (2.31.0)
Requirement already satisfied: psutil in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 7)) (7.0.0)
Requirement already satisfied: keyboard in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 8)) (0.13.5)
Requirement already satisfied: pynput in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 9)) (1.8.1)
Requirement already satisfied: humanize in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 10)) (4.12.3)
Requirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from -r core/requirements.txt (line 11)) (59.6.0)
Requirement already satisfied: playwright in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 12)) (1.52.0)
Requirement already satisfied: urllib3<3 in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 13)) (2.4.0)
Requirement already satisfied: chardet<5 in /home/nexpocket/.local/lib/python3.10/site-packages (from -r core/requirements.txt (line 14)) (4.0.0)
Requirement already satisfied: idna<4,>=2.5 in /usr/lib/python3/dist-packages (from requests==2.31.0->-r core/requirements.txt (line 6)) (3.3)
Requirement already satisfied: certifi>=2017.4.17 in /home/nexpocket/.local/lib/python3.10/site-packages (from requests==2.31.0->-r core/requirements.txt (line 6)) (2025.6.15)
Requirement already satisfied: charset-normalizer<4,>=2 in /home/nexpocket/.local/lib/python3.10/site-packages (from requests==2.31.0->-r core/requirements.txt (line 6)) (3.4.2)
Requirement already satisfied: PyQt5-Qt5<5.16.0,>=5.15.2 in /home/nexpocket/.local/lib/python3.10/site-packages (from PyQt5->-r core/requirements.txt (line 1)) (5.15.17)
Requirement already satisfied: PyQt5-sip<13,>=12.15 in /home/nexpocket/.local/lib/python3.10/site-packages (from PyQt5->-r core/requirements.txt (line 1)) (12.17.0)
Requirement already satisfied: click in /usr/lib/python3/dist-packages (from browserforge[all]->-r core/requirements.txt (line 2)) (8.0.3)
Requirement already satisfied: orjson in /home/nexpocket/.local/lib/python3.10/site-packages (from browserforge[all]->-r core/requirements.txt (line 2)) (3.10.18)
Requirement already satisfied: screeninfo in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (0.8.1)
Requirement already satisfied: ua_parser in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (1.0.1)
Requirement already satisfied: tqdm in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (4.67.1)
Requirement already satisfied: numpy in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (2.2.6)
Requirement already satisfied: lxml in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (5.4.0)
Requirement already satisfied: typing_extensions in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (4.13.2)
Requirement already satisfied: language-tags in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (1.2.0)
Requirement already satisfied: pyyaml in /usr/lib/python3/dist-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (5.4.1)
Requirement already satisfied: pysocks in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (1.7.1)
Requirement already satisfied: platformdirs in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (4.3.8)
Requirement already satisfied: geoip2 in /home/nexpocket/.local/lib/python3.10/site-packages (from camoufox[geoip]->-r core/requirements.txt (line 3)) (5.1.0)
Requirement already satisfied: websockets in /home/nexpocket/.local/lib/python3.10/site-packages (from undetected-chromedriver->-r core/requirements.txt (line 4)) (15.0.1)
Requirement already satisfied: trio~=0.30.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from selenium->-r core/requirements.txt (line 5)) (0.30.0)
Requirement already satisfied: trio-websocket~=0.12.2 in /home/nexpocket/.local/lib/python3.10/site-packages (from selenium->-r core/requirements.txt (line 5)) (0.12.2)
Requirement already satisfied: websocket-client~=1.8.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from selenium->-r core/requirements.txt (line 5)) (1.8.0)
Requirement already satisfied: six in /usr/lib/python3/dist-packages (from pynput->-r core/requirements.txt (line 9)) (1.16.0)
Requirement already satisfied: python-xlib>=0.17 in /home/nexpocket/.local/lib/python3.10/site-packages (from pynput->-r core/requirements.txt (line 9)) (0.33)
Requirement already satisfied: evdev>=1.3 in /home/nexpocket/.local/lib/python3.10/site-packages (from pynput->-r core/requirements.txt (line 9)) (1.6.1)
Requirement already satisfied: greenlet<4.0.0,>=3.1.1 in /home/nexpocket/.local/lib/python3.10/site-packages (from playwright->-r core/requirements.txt (line 12)) (3.2.3)
Requirement already satisfied: pyee<14,>=13 in /home/nexpocket/.local/lib/python3.10/site-packages (from playwright->-r core/requirements.txt (line 12)) (13.0.0)
Requirement already satisfied: exceptiongroup in /home/nexpocket/.local/lib/python3.10/site-packages (from trio~=0.30.0->selenium->-r core/requirements.txt (line 5)) (1.3.0)
Requirement already satisfied: outcome in /home/nexpocket/.local/lib/python3.10/site-packages (from trio~=0.30.0->selenium->-r core/requirements.txt (line 5)) (1.3.0.post0)
Requirement already satisfied: sniffio>=1.3.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from trio~=0.30.0->selenium->-r core/requirements.txt (line 5)) (1.3.1)
Requirement already satisfied: attrs>=23.2.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from trio~=0.30.0->selenium->-r core/requirements.txt (line 5)) (25.3.0)
Requirement already satisfied: sortedcontainers in /home/nexpocket/.local/lib/python3.10/site-packages (from trio~=0.30.0->selenium->-r core/requirements.txt (line 5)) (2.4.0)
Requirement already satisfied: wsproto>=0.14 in /home/nexpocket/.local/lib/python3.10/site-packages (from trio-websocket~=0.12.2->selenium->-r core/requirements.txt (line 5)) (1.2.0)
Requirement already satisfied: aiohttp<4.0.0,>=3.6.2 in /home/nexpocket/.local/lib/python3.10/site-packages (from geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (3.12.13)
Requirement already satisfied: maxminddb<3.0.0,>=2.7.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (2.7.0)
Requirement already satisfied: ua-parser-builtins in /home/nexpocket/.local/lib/python3.10/site-packages (from ua_parser->camoufox[geoip]->-r core/requirements.txt (line 3)) (0.18.0.post1)
Requirement already satisfied: async-timeout<6.0,>=4.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from aiohttp<4.0.0,>=3.6.2->geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (5.0.1)
Requirement already satisfied: yarl<2.0,>=1.17.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from aiohttp<4.0.0,>=3.6.2->geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (1.20.1)
Requirement already satisfied: aiosignal>=1.1.2 in /home/nexpocket/.local/lib/python3.10/site-packages (from aiohttp<4.0.0,>=3.6.2->geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (1.3.2)
Requirement already satisfied: multidict<7.0,>=4.5 in /home/nexpocket/.local/lib/python3.10/site-packages (from aiohttp<4.0.0,>=3.6.2->geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (6.4.4)
Requirement already satisfied: propcache>=0.2.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from aiohttp<4.0.0,>=3.6.2->geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (0.3.2)
Requirement already satisfied: frozenlist>=1.1.1 in /home/nexpocket/.local/lib/python3.10/site-packages (from aiohttp<4.0.0,>=3.6.2->geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (1.7.0)
Requirement already satisfied: aiohappyeyeballs>=2.5.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from aiohttp<4.0.0,>=3.6.2->geoip2->camoufox[geoip]->-r core/requirements.txt (line 3)) (2.6.1)
Requirement already satisfied: h11<1,>=0.9.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from wsproto>=0.14->trio-websocket~=0.12.2->selenium->-r core/requirements.txt (line 5)) (0.16.0)
✓ Dependencies installed
Setting up backend...
Running: pip3 install fastapi uvicorn python-multipart python-jose[cryptography] passlib[bcrypt] python-dotenv
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: fastapi in /home/nexpocket/.local/lib/python3.10/site-packages (0.116.1)
Requirement already satisfied: uvicorn in /home/nexpocket/.local/lib/python3.10/site-packages (0.35.0)
Requirement already satisfied: python-multipart in /home/nexpocket/.local/lib/python3.10/site-packages (0.0.20)
Requirement already satisfied: python-jose[cryptography] in /home/nexpocket/.local/lib/python3.10/site-packages (3.5.0)
Requirement already satisfied: passlib[bcrypt] in /home/nexpocket/.local/lib/python3.10/site-packages (1.7.4)
Requirement already satisfied: python-dotenv in /home/nexpocket/.local/lib/python3.10/site-packages (1.1.1)
Requirement already satisfied: starlette<0.48.0,>=0.40.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from fastapi) (0.47.1)
Requirement already satisfied: typing-extensions>=4.8.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from fastapi) (4.13.2)
Requirement already satisfied: pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4 in /home/nexpocket/.local/lib/python3.10/site-packages (from fastapi) (2.11.7)
Requirement already satisfied: click>=7.0 in /usr/lib/python3/dist-packages (from uvicorn) (8.0.3)
Requirement already satisfied: h11>=0.8 in /home/nexpocket/.local/lib/python3.10/site-packages (from uvicorn) (0.16.0)
Requirement already satisfied: ecdsa!=0.15 in /home/nexpocket/.local/lib/python3.10/site-packages (from python-jose[cryptography]) (0.19.1)
Requirement already satisfied: pyasn1>=0.5.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from python-jose[cryptography]) (0.6.1)
Requirement already satisfied: rsa!=4.1.1,!=4.4,<5.0,>=4.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from python-jose[cryptography]) (4.9.1)
Requirement already satisfied: cryptography>=3.4.0 in /usr/lib/python3/dist-packages (from python-jose[cryptography]) (3.4.8)
Requirement already satisfied: bcrypt>=3.1.0 in /usr/lib/python3/dist-packages (from passlib[bcrypt]) (3.2.0)
Requirement already satisfied: six>=1.9.0 in /usr/lib/python3/dist-packages (from ecdsa!=0.15->python-jose[cryptography]) (1.16.0)
Requirement already satisfied: typing-inspection>=0.4.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.4.1)
Requirement already satisfied: pydantic-core==2.33.2 in /home/nexpocket/.local/lib/python3.10/site-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (2.33.2)
Requirement already satisfied: annotated-types>=0.6.0 in /home/nexpocket/.local/lib/python3.10/site-packages (from pydantic!=1.8,!=1.8.1,!=2.0.0,!=2.0.1,!=2.1.0,<3.0.0,>=1.7.4->fastapi) (0.7.0)
Requirement already satisfied: anyio<5,>=3.6.2 in /home/nexpocket/.local/lib/python3.10/site-packages (from starlette<0.48.0,>=0.40.0->fastapi) (4.9.0)
Requirement already satisfied: idna>=2.8 in /usr/lib/python3/dist-packages (from anyio<5,>=3.6.2->starlette<0.48.0,>=0.40.0->fastapi) (3.3)
Requirement already satisfied: sniffio>=1.1 in /home/nexpocket/.local/lib/python3.10/site-packages (from anyio<5,>=3.6.2->starlette<0.48.0,>=0.40.0->fastapi) (1.3.1)
Requirement already satisfied: exceptiongroup>=1.0.2 in /home/nexpocket/.local/lib/python3.10/site-packages (from anyio<5,>=3.6.2->starlette<0.48.0,>=0.40.0->fastapi) (1.3.0)
✓ Backend setup complete
Setting up frontend...
Running: npm install axios react-router-dom @mui/material @emotion/react @emotion/styled @mui/icons-material

changed 1 package, and audited 1549 packages in 3s

283 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (3 moderate, 6 high)

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
Running: npm run build

> nexads-frontend@0.1.0 build
> react-scripts build

Creating an optimized production build...
Compiled with warnings.

[eslint]
src/App.js
  Line 27:3:  'Select' is defined but never used                                                                                                                                 no-unused-vars
  Line 28:3:  'Slider' is defined but never used                                                                                                                                 no-unused-vars
  Line 94:6:  React Hook useEffect has missing dependencies: 'fetchConfig', 'fetchProxies', 'fetchStats', and 'fetchStatus'. Either include them or remove the dependency array  react-hooks/exhaustive-deps

Search for the keywords to learn more about each warning.
To ignore, add // eslint-disable-next-line to the line before.

File sizes after gzip:

  133.38 kB  build/static/js/main.4f059f1c.js

The project was built assuming it is hosted at /.
You can control this with the homepage field in your package.json.

The build folder is ready to be deployed.
You may serve it with a static server:

  serve -s build

Find out more about deployment here:

  https://cra.link/deployment

✓ Frontend setup complete
Setting up nginx...
Running: sudo mv /tmp/nexads /etc/nginx/sites-available/nexads
Running: sudo ln -sf /etc/nginx/sites-available/nexads /etc/nginx/sites-enabled/nexads
Running: sudo nginx -t
nginx: [emerg] no "ssl_certificate" is defined for the "listen ... ssl" directive in /etc/nginx/sites-enabled/app.camarjaya.co.id.conf:1
nginx: configuration file /etc/nginx/nginx.conf test failed
Error running: sudo nginx -t
✗ Nginx configuration failed
nexpocket@cloud-2:~/nexads-main$